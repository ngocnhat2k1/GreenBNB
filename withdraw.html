<head>
    <title>GreenTRX - Mining TRX || 10% daily</title>

    <script src="js/jquery-3.5.1.min.js"></script>
    <link rel="shortcut icon" href="favicon.ico" />

    <!-- recaptcha -->
    <script src="js/mainscript.js"></script>
    <script src="js/main.js"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />

    <script src="js/rangeslider.min.js"></script>

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest.html" />
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#1eba36" />
    <meta name="msapplication-TileColor" content="#474747" />
    <meta name="theme-color" content="#ffffff" />

    <link rel="stylesheet" href="css/modals.css" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/rangeslider.css" />
</head>

<link rel="stylesheet" href="css/base.css" />
<link rel="stylesheet" href="css/modals.css" />

<div class="main__overflow">
    <header class="header__section">
        <div class="header__conteiner">
            <div class="logotype__conteiner">
                <div class="header__mobileButton"></div>
                <a href="#" class="logo"><img src="images/logotype.png" alt="GreenTRX" /></a>
            </div>

            <nav class="header__navigation">
                <a class="home_page" href="account.html">Mining</a>
                <a class="plans_page" href="deposit.html">Deposit</a>
                <a class="about_page current" href="withdraw.html">Withdraw</a>
                <a class="calculator_page" href="referrals.html">Referral Program</a>
                <a class="faq_page" href="support.html">Support</a>
            </nav>

            <div class="header__user-nav" style="
          font-size: 27px;
          color: #dcbb36;
          margin-top: 50px;
          font-weight: 600;
        "></div>
        </div>
    </header>

    <div class="main__screen-section">
        <div class="main__screen-conteiner">
            <img src="images/ellipseContur.png" alt="" class="circleImg" />
            <div class="darkLayer"></div>

            <div class="msc__left-column">
                <div class="msc__conteiner" data-aos="animation">
                    <h1>WITHDRAW</h1>
                    <div class="col-lg-6 col-md-6 svm">
                        <div class="grey-block" style="height: 450px; overflow: auto">
                            <div class="grey-block half deposit" style="
                  color: #fff;
                  font-size: 17px;
                  padding: 55px 55px 55px 0;
                  margin-top: 24px;
                ">
                                <div>
                                    Payments are made automatically within 5 minutes after the application is submitted.
                                </div>

                                <form class="" action="">
                                    <p class="fs16 mt5" style="font-size: 19px; color: #debb36">
                                        Enter withdrawal amount
                                    </p>
                                    <input style="
                      color: #000;
                      text-align: center;
                      border: none;
                      width: 100%;
                      line-height: 39px;
                      font-size: 21px;
                      border-radius: 30px;
                    " type="text" id="amount" name="amount" class="user-input" placeholder="From 0.05 BNB" value="" maxlength="10" />
                                    <p class="fs16 mt5" style="font-size: 19px; margin: 20px 0; color: #debb36">
                                        Enter the address want to withdraw
                                    </p>
                                    <input style="
                      color: #000;
                      text-align: center;
                      border: none;
                      width: 100%;
                      line-height: 39px;
                      font-size: 21px;
                      border-radius: 30px;
                    " type="text" id="toAddress" name="toAddress" class="user-input" placeholder="Enter the address want to withdraw" value="" />
                                    <button id="butw" style="
                      font-size: 22px;
                      background: #debb36;
                      padding: 8px 31px;
                      margin-top: 20px;
                      border: 1px solid #ffc50d;
                      width: 250px;
                      color: #000;
                      font-weight: 600;
                      border-radius: 30px;
                      cursor: pointer;
                    " class="waves-effect waves-light btn dark-btn w220 mt5 mb10" type="button" onclick="withdraw();">
                    Withdraw
                  </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="msc__right-column">
                <div class="msc__data-table" data-aos="animation">
                    <h1 style="
              color: #fff;
              font-weight: 600;
              font-size: 38px;
              margin-bottom: 20px;
              -webkit-animation-duration: 1s;
              animation-duration: 1s;
              -webkit-animation-fill-mode: both;
              animation-fill-mode: both;
            ">
                        LAST <strong>WITHDRAW</strong>
                    </h1>
                    <div class="col-lg-6 col-md-6 svm">
                        <div class="section-info text-center">
                            <div style="width: 500px">
                                <div class="table-content" style="
                    border-top: 1px solid #fff;
                    border-bottom: 1px solid #fff;
                    height: 340px;
                    width: 100%;
                    overflow: auto;
                  ">
                                    <table class="centered highlight" style="width: 100%; font-size: 16px; text-align: center">
                                        <thead>
                                            <tr style="
                          color: #fff;
                          border-bottom: 1px solid #fff;
                          line-height: 29px;
                        ">
                                                <th style="text-align: center">Amount</th>
                                                <th style="text-align: center">TX</th>
                                                <th style="text-align: center">Date</th>
                                            </tr>
                                        </thead>
                                        <tbody id="withdraw-history">

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--- Modals End --->
<script data-cfasync="false" src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>

<script src="js/main.js"></script>
<script src="js/aos.js"></script>
<script src="js/slick.min.js"></script>

<script>
    $(".oa__left-column ul").slick({
        infinite: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        centerMode: true,
        autoplay: true,
        arrows: false,
        dots: false,
    });
    AOS.init({
        easing: "ease-in-out-sine",
    });
</script>

<script>
    AOS.init({
        easing: "ease-in-out-sine",
    });
    $(".slide__coins-group").slick({
        infinite: true,
        slidesToShow: 5,
        slidesToScroll: 1,
        variableWidth: true,
        autoplay: true,
        arrows: false,
        dots: false,
    });
    $(".js-slideshow").slick({
        infinite: true,
        slidesToShow: 5,
        slidesToScroll: 1,
        variableWidth: true,
        autoplay: true,
        arrows: false,
        dots: false,
        centerMode: true,
    });
    $(".screen__animation-list").slick({
        infinite: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        variableWidth: false,
        autoplay: true,
        arrows: true,
        dots: false,
        centerMode: false,
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/scripts.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/mains.js"></script>
<script src="js/main.js"></script>
<script src="js/aos.js"></script>
<script src="js/life.js"></script>

<style>
    .dashboard__menu {
        z-index: 100;
    }
    
    .main__navigation.visible {
        display: block;
    }
</style>
<script>
    function convert(dateString) {
        const timestamp = Date.parse(dateString);
        const dateObject = new Date(timestamp);
        const time = dateObject.getDate() + "/" + (dateObject.getMonth() + 1) + "/" + dateObject.getFullYear() + " " + dateObject.getHours() + ":" + dateObject.getMinutes() + ":" + dateObject.getSeconds();
        return time;
    }

    function countmine() {
        var count = $("#countfull").val();
        var ucount = parseFloat(count) + parseFloat(3.4722222222222e-6);
        $("#countfull").val(ucount);
        $("#count").text(parseFloat(ucount).toFixed(8));
    }
    setInterval(countmine, 100);

    function withdraw() {
        $("#butw").text("Wait...");
        document.getElementById("butw").setAttribute("onclick", "FunB()");

        var amount = $("#amount").val();
        var toAddress = $("#toAddress").val();

        $.ajax({
            url: "https://greenbnb.onrender.com/withdraw-history/withdraw",
            headers: {
                "x-api-key": "9c30dbde-c67a-4638-b24e-94f01d78bd1d",
                Authorization: "Bearer " + $.cookie("access_token"),
            },
            type: "POST",
            data: {
                money: amount,
                toAddress: toAddress,
            },
            success: function(data) {
                alert('You have successfully withdrawn, check it now');
                window.location.href = "withdraw.html";

            },
            error: function(msg) {
                console.log(msg.responseJSON.message);
                alert(msg.responseJSON.message);
            },
        });
    }

    function getWithdrawHistory() {
        if ($.cookie("access_token") == undefined) {
            window.location.href = "index.html";
        } else {
            $.ajax({
                url: "https://greenbnb.onrender.com/withdraw-history",
                headers: {
                    "x-api-key": "9c30dbde-c67a-4638-b24e-94f01d78bd1d",
                    Authorization: "Bearer " + $.cookie("access_token"),
                },
                type: "GET",
                success: function(data) {
                    console.log(data);
                    var tableData = $("#withdraw-history");
                    if (data.length > 0) {
                        const withdrawHistoryList = data.map(function(withdraw, index) {
                            const withdrawHistoryItem = ` 
                            <tr style=" color: #debb36; font-weight: 600; line-height: 30px; ">
                              <td>${withdraw.bNB}</td>
                              <td>${withdraw.tx}</td>
                              <td>${convert(withdraw.time)}</td>
                            </tr>`;
                            return withdrawHistoryItem;
                        });
                        tableData.html(withdrawHistoryList.join(""));
                    } else {
                        tableData.html(
                            "<tr><td colspan='4' style='color:white; '>No withdraw yet</td> </tr>"
                        );
                    }
                },
                error: function(msg) {
                    console.log(msg.responseJSON.message);
                    alert(msg.responseJSON.message);
                },
            });
        }
    }

    function getAccount() {
        if ($.cookie("access_token") == undefined) {
            window.location.href = "index.html";
        } else {
            $.ajax({
                url: "https://greenbnb.onrender.com/accounts/profile",
                headers: {
                    "x-api-key": "9c30dbde-c67a-4638-b24e-94f01d78bd1d",
                    Authorization: "Bearer " + $.cookie("access_token"),
                },
                type: "GET",
                success: function(data) {
                    var amount = $("#amount").val(data.depositAddress.wallet.bNB);
                    var toAddress = $("#toAddress").val(data.id);
                },
                error: function(msg) {
                    console.log(msg.responseJSON.message);
                    alert(msg.responseJSON.message);
                },
            });
        }
    }
    getAccount();
    getWithdrawHistory();
</script>